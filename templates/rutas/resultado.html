{% extends "base.html" %}

{% block head_content %}

<title>Bienvenido a Movilízate</title>
{% load static %}
    <!-- Leaflet -->
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
    integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
    crossorigin=""></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
    integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
    crossorigin=""/>
    <!-- Extramarkers -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.0/leaflet.awesome-markers.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-extra-markers@1.0.6/dist/css/leaflet.extra-markers.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css">
    <!-- Estilos -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <!-- JS, Popper.js, and jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="{% static 'css/estilos.css' %} ">
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/ad8dd70d61.js" crossorigin="anonymous"></script>
    <!-- Sweet ALert -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
    <!-- Highlight -->
    <script src="{% static 'leaflet.marker.highlight/index.js'%}"></script>
    <link href="{% static 'leaflet.marker.highlight/index.css'%}" rel="stylesheet" >

    <!-- EStilos -->
    {% endblock%}        
    {% block container %}
    <!-- Row para el mapa
     -->
    <div class="row">
        <div class="col " style="padding-right: -10px;">

            <div class="main-wrapper">
               

        
            <div id="myMap" style="height: 1300px; width:1100px" style="padding-right: 0px;">
                <div class="overlay">
                    <input type="radio">Hola
                </div>
                <button id="refreshButton">Refresh Button</button>
            </div>
            
           
            <div class="loader">
                <img src="{% static "img/carga.gif" %}" alt="">
            </div>
            </div>

        </div>
            
        </div>
    </div>
    <!-- Row para las tarjetas -->
    <div class="row" id="" >
        <div class="col col-4 col-md-offset-2" id="res0" style="padding-left: 80px">        
        </div>
        <div class="col col-4 col-md-offset-2" id="res1" style="padding-left: 90px">        
        </div>
        <div class="col col-4 col-md-offset-2" id="res2" style="padding-left: 90px">        
        </div>
    </div>
    <!-- Liberías: Leaflet, Enrutamiento, GeoJson dataset -->
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
    <script src="{% static 'js/leaflet.extra-markers.min.js' %}"></script>
    <script src="{% static 'js/routing/leaflet-routing-machine.min.js' %}"></script>
    <script src="{% static 'js/output.js' %}"></script>
    <script src="{% static 'js/script_blank.js'%}"></script>
    <script src="{% static 'js/movilizate.js' %}"></script>
    <!-- Script para mostrar la información de las tarjetas -->
    <script>
        var hospitales = {{ hcf|safe }};
        for(i=0;i<3;i++){
            var nombre = hospitales[i].NOMBRE_DE_LA_UNIDAD;
            if(i==0){
                let tarjetas = `<div class="card card-hover border-0 rounded img-fluid position-relative zoom" style="border-radius:25px; height:400px; width:300px; padding-left:30px; padding-right:10px;  background-image: url('{% static 'img/green.png' %}'); max-height:400px; max-width:280px;" >
                    <div class="card-body" style="padding-top: -5px; z-index:2; position-absolute">
                    <div class="row t-info">
                        <div class="col-4"  >
                            <span class="fcircular" >
                            <img src="{% static 'img/descarga.png' %}" class="rounded-circle z-depth-2 shadow" height="55" width="55" alt="100x100" style="padding-bottom: 5px;">
                            </span>
                        </div>
                            <div class="col-8" padding-right="0">
                            
                            <div class="row"> 
                                <div class="col-3" style="color:white">3</h7></div>
                                <div class="col-9 d-flex justify-content-end" style="padding: top 25;">  
                                    <div class="row" style="padding-top: 4px;">
                                        <i class="fas fa-star" style="color:gold"></i>
                                        <i class="fas fa-star" style="color:gold"></i>
                                        <i class="fas fa-star" style="color:gold"></i>
                                        <i class="fas fa-star" style="color:grey"></i>
                                        <i class="fas fa-star" style="color:grey"></i>
                                    </div>  
                                </div>
                            </div>
                            <div class="row">
                            <h5 class="t-tarjeta" style="font-size: 15px; padding-left: 15px; padding-top:10px; color:white;">`+ nombre +`</h5>
                            </div>
                            </div>
                    </div>
                    <div class="row" style:padding-top:50px;>
                        <div class="col" style="max-height: 50px;">
                            <div class="tb-tarjeta rounded" style="background-color: #00d74e; ">
                                <h5 class="ct-tarjeta" style="font-size: 10px; text-align:center; color:white;" >Disponible en urgencias </h5>
                                <h5 class="ct-tarjeta" style="font-size: 10px; text-align:center; color:white;" >Servicio 24 horas</h5>
                                <h5 class="ct-tarjeta" style="font-size: 10px; text-align:center; color:white;" >Equipamento completo</h5>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col" style="padding-top: 20px; text-align:center;">
                            <button class="btn btn-light shadow" style="font-size: 10px; display:inline-block;">REGISTRAR EMERGENCIA</button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <ul style="padding-left: 0; padding-top:10px; ">
                                <li style="list-style-type: none;"><a href="" style="color: white; text-decoration:none;">ESPECIALIDADES</a></li>
                                <li style="list-style-type: none;"><a href="" style="color: white; text-decoration:none;">SERVICIOS</a></li>
                                <li style="list-style-type: none;"><a href="" style="color: white; text-decoration:none;">PRECIOS</a></li>
                                <li style="list-style-type: none;"><a href="" style="color: white; text-decoration:none;">CONTACTO</a></li>
                            </ul>
                        </div>
                    </div>
                    </div>
                </div>`;
                document.getElementById('res'+[i]).innerHTML= tarjetas;
            }
            else if (i == 1){
                let tarjetas = `<div class="card card-hover border-0 border-secondary rounded img-fluid position-relative zoom" style=" height:400px; width:300px; padding-left:30px; padding-right:10px;  background-image: url('{% static 'img/view.png' %}'); max-height:400px; max-width:280px;" >
                    <div class="card-body" style="padding-top: -5px; z-index:2; position-absolute">
                    <div class="row t-info">
                        <div class="col-4"  >
                            <span class="fcircular" >
                            <img src="{% static 'img/descarga.png' %}" class="rounded-circle z-depth-2 shadow" height="55" width="55" alt="100x100" style="padding-bottom: 5px;">
                            </span>
                        </div>
                            <div class="col-8" padding-right="0">
                            
                            <div class="row"> 
                                <div class="col-3" style="color:black">3</h7></div>
                                <div class="col-9 d-flex justify-content-end" style="padding: top 25;">  
                                    <div class="row" style="padding-top: 4px;">
                                        <i class="fas fa-star" style="color:gold"></i>
                                        <i class="fas fa-star" style="color:gold"></i>
                                        <i class="fas fa-star" style="color:gold"></i>
                                        <i class="fas fa-star" style="color:grey"></i>
                                        <i class="fas fa-star" style="color:grey"></i>
                                    </div>  
                                </div>
                            </div>
                            <div class="row">
                            <h5 class="t-tarjeta" style="font-size: 15px; padding-left: 15px; padding-top:10px; color:black;">`+ nombre +`</h5>
                            </div>
                            </div>
                    </div>
                    <div class="row">
                        <div class="col" style="max-height: 50px; padding-top:10px;">
                            <div class="tb-tarjeta rounded" style="background-color: #00d74e;">
                                <h5 class="ct-tarjeta" style="font-size: 10px; text-align:center; color:white;" >Disponible en urgencias </h5>
                                <h5 class="ct-tarjeta" style="font-size: 10px; text-align:center; color:white;" >Servicio 24 horas</h5>
                                <h5 class="ct-tarjeta" style="font-size: 10px; text-align:center; color:white;" >Equipamento completo</h5>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col" style="padding-top: 20px; text-align:center;">
                            <button class="btn btn-light shadow" style="font-size: 10px; display:inline-block;">REGISTRAR EMERGENCIA</button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <ul style="padding-left: 0; padding-top:10px; ">
                                <li style="list-style-type: none;"><a href="" style="color: black; text-decoration:none;">ESPECIALIDADES</a></li>
                                <li style="list-style-type: none;"><a href="" style="color: black; text-decoration:none;">SERVICIOS</a></li>
                                <li style="list-style-type: none;"><a href="" style="color: black; text-decoration:none;">PRECIOS</a></li>
                                <li style="list-style-type: none;"><a href="" style="color: black; text-decoration:none;">CONTACTO</a></li>
                            </ul>
                        </div>
                    </div>
                    </div>
                </div>`;
                document.getElementById('res'+[i]).innerHTML= tarjetas;
            }
            else{
                let tarjetas = `<div class="card card-hover border-0 border-secondary rounded img-fluid position-relative zoom" style=" height:400px; width:300px; padding-left:30px; padding-right:10px;  background-image: url('{% static 'img/selected.png' %}'); max-height:400px; max-width:280px;" >
                    <div class="card-body" style="padding-top: -5px; z-index:2; position-absolute">
                    <div class="row t-info">
                        <div class="col-4"  >
                            <span class="fcircular" >
                            <img src="{% static 'img/descarga.png' %}" class="rounded-circle z-depth-2 shadow" height="55" width="55" alt="100x100" style="padding-bottom: 5px;">
                            </span>
                        </div>
                            <div class="col-8" padding-right="0">
                            
                            <div class="row"> 
                                <div class="col-3" style="color:white">3</h7></div>
                                <div class="col-9 d-flex justify-content-end" style="padding: top 25;">  
                                    <div class="row" style="padding-top: 4px;">
                                        <i class="fas fa-star" style="color:gold"></i>
                                        <i class="fas fa-star" style="color:gold"></i>
                                        <i class="fas fa-star" style="color:gold"></i>
                                        <i class="fas fa-star" style="color:grey"></i>
                                        <i class="fas fa-star" style="color:grey"></i>
                                    </div>  
                                </div>
                            </div>
                            <div class="row">
                            <h5 class="t-tarjeta" style="font-size: 15px; padding-left: 15px; padding-top:10px; color:white;">`+ nombre +`</h5>
                            </div>
                            </div>
                    </div>
                    <div class="row">
                        <div class="col" style="max-height: 50px; padding-top:10px;">
                            <div class="tb-tarjeta rounded" style="background-color: #00d74e;">
                                <h5 class="ct-tarjeta" style="font-size: 10px; text-align:center; color:white;" >Disponible en urgencias </h5>
                                <h5 class="ct-tarjeta" style="font-size: 10px; text-align:center; color:white;" >Servicio 24 horas</h5>
                                <h5 class="ct-tarjeta" style="font-size: 10px; text-align:center; color:white;" >Equipamento completo</h5>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col" style="padding-top: 20px; text-align:center;">
                            <button class="btn btn-light shadow" style="font-size: 10px; display:inline-block;">REGISTRAR EMERGENCIA</button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <ul style="padding-left: 0; padding-top:10px; ">
                                <li style="list-style-type: none;"><a href="" style="color: white; text-decoration:none;">ESPECIALIDADES</a></li>
                                <li style="list-style-type: none;"><a href="" style="color: white; text-decoration:none;">SERVICIOS</a></li>
                                <li style="list-style-type: none;"><a href="" style="color: white; text-decoration:none;">PRECIOS</a></li>
                                <li style="list-style-type: none;"><a href="" style="color: white; text-decoration:none;">CONTACTO</a></li>
                            </ul>
                        </div>
                    </div>
                    </div>
                </div>`;
                document.getElementById('res'+[i]).innerHTML= tarjetas;
            }
                
            
        }
    </script>
    <script>
         //Cargar la animación de load
         window.addEventListener('load', function(){
            const loader = document.querySelector(".loader");
            loader.className += " hidden";
        });

        //Verificación de la obtención del resultado de modelo 
        console.log({{ hcf|safe }})

        //Importación de variables para correr 
        var latitude = "{{latitude}}";
        var longitude = "{{longitude}}";

        //Mejorar el formato con escapejs
        //var hospitaless = "{{hcf | escapejs}}";
       
        //BESUTO DEBUGA
        console.log("Chi cheñol");

        //Función de centrado
        center(latitude,longitude);
        //Ciclo para colocar los íconos
        for (i=0;i<3;i++){
            var hospitales = {{ hcf|safe }};
            if(i==0){
            //Pendiente agregar nombres al popup
            mname = hospitales[i].NOMBRE_DE_LA_UNIDAD;
            mlatitude = hospitales[i].LATITUD;
            mlongitude = hospitales[i].LONGITUD;
            hospitalmarkerh(mlatitude,mlongitude);
            }
            else {
                //Pendiente agregar nombres al popup
                mname = hospitales[i].NOMBRE_DE_LA_UNIDAD;
                mlatitude = hospitales[i].LATITUD;
                mlongitude = hospitales[i].LONGITUD;
                hospitalmarker(mlatitude,mlongitude); 
            }
        }
        Swal.fire({
            title: 'Listo!',
            text: 'Hemos encontrado opciones cerca de usted',
            icon: 'success',
            confirmButtonText: 'Continuar'
          })
        
        
    </script>
    {% endblock %}
